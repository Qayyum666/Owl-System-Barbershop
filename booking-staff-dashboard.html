<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard - User Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========================== */
        /* Your original CSS (unchanged) */
        /* ========================== */
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --success-color: #4cc9f0;
            --warning-color: #ff9e00;
            --danger-color: #f72585;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --sidebar-width: 250px;
            --header-height: 70px;
            --border-radius: 10px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f5f7fb; color: var(--dark-color); display:flex; min-height:100vh; overflow-x:hidden; }

        .status-confirmed { background-color:#e7f7ef; color:#1ea97c; }
        .status-pending { background-color:#fff5e6; color:#ff9800; }
        .status-cancelled { background-color:#ffe6e6; color:#f44336; }

        /* Sidebar */
        .sidebar { width:var(--sidebar-width); background:linear-gradient(180deg,var(--primary-color),var(--secondary-color)); color:white; position:fixed; height:100vh; padding:20px 0; transition:var(--transition); z-index:1000; box-shadow:var(--shadow); }
        .sidebar-header { padding:0 20px 30px; border-bottom:1px solid rgba(255,255,255,0.1); text-align:center; }
        .sidebar-header h2 { font-size:1.5rem; display:flex; align-items:center; gap:10px; }
        .sidebar-header h2 i { font-size:1.8rem; }
        .sidebar-menu { list-style:none; padding:20px 0; }
        .sidebar-menu li { margin-bottom:5px; }
        .sidebar-menu a { color:white; text-decoration:none; padding:15px 25px; display:flex; align-items:center; gap:15px; transition:var(--transition); font-weight:500; }
        .sidebar-menu a:hover, .sidebar-menu a.active { background-color: rgba(255,255,255,0.1); border-left:4px solid var(--success-color); }
        .sidebar-menu i { width:20px; text-align:center; }

        /* Main Content */
        .main-content { flex:1; margin-left:var(--sidebar-width); transition:var(--transition); }
        header { height:var(--header-height); background-color:white; display:flex; justify-content:space-between; align-items:center; padding:0 30px; box-shadow:var(--shadow); position:sticky; top:0; z-index:999; }
        .header-left { display:flex; align-items:center; gap:15px; }
        .menu-toggle { background:none; border:none; font-size:1.5rem; color:var(--primary-color); cursor:pointer; display:none; }
        .search-box { position:relative; width:300px; }
        .search-box input { width:100%; padding:10px 15px 10px 40px; border-radius:30px; border:1px solid #ddd; outline:none; transition:var(--transition); }
        .search-box input:focus { border-color:var(--primary-color); }
        .search-box i { position:absolute; left:15px; top:50%; transform:translateY(-50%); color:#999; }
        .header-right { display:flex; align-items:center; gap:25px; }
        .notification { position:relative; cursor:pointer; }
        .notification i { font-size:1.3rem; color:#666; }
        .notification-count { position:absolute; top:-8px; right:-8px; background-color:var(--danger-color); color:white; border-radius:50%; width:18px; height:18px; font-size:0.7rem; display:flex; align-items:center; justify-content:center; }
        .user-profile { display:flex; align-items:center; gap:10px; cursor:pointer; }
        .user-avatar { width:40px; height:40px; border-radius:50%; background-color:var(--primary-color); display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; }

        .content-wrapper { padding:30px; }
        .page-title { margin-bottom:30px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:20px; }
        .page-title h1 { font-size:2rem; color:var(--dark-color); }

        .user-stats { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:25px; margin-bottom:40px; }
        .user-stat-card { background-color:white; border-radius:var(--border-radius); padding:25px; box-shadow:var(--shadow); display:flex; align-items:center; gap:20px; transition:var(--transition); }
        .user-stat-card:hover { transform:translateY(-5px); }
        .user-stat-icon { width:60px; height:60px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.8rem; color:white; }
        .user-stat-icon.total { background-color:var(--primary-color); }
        .user-stat-icon.active { background-color:var(--success-color); }
        .user-stat-icon.inactive { background-color:#6c757d; }
        .user-stat-icon.new { background-color:var(--warning-color); }
        .user-stat-info h3 { font-size:1.8rem; margin-bottom:5px; }
        .user-stat-info p { color:#666; font-size:0.9rem; }

        .action-buttons { display:flex; gap:15px; flex-wrap:wrap; margin-bottom:30px; }
        .btn-action { border:none; padding:6px 10px; border-radius:6px; cursor:pointer; font-size:14px; }
        .btn-action.view { background-color: rgba(52, 152, 219, 0.1); color:var(--secondary-color); }
        .btn-action.edit { background-color:#e3f2fd; color:#1976d2; }
        .btn-action.delete { background-color:#fdecea; color:#d32f2f; }
        .btn-action:hover { opacity:0.85; }
        .action-buttons-cell { display:flex; gap:6px; }

        .btn { padding:12px 24px; border-radius:var(--border-radius); border:none; font-weight:600; cursor:pointer; transition:var(--transition); display:flex; align-items:center; gap:10px; }
        .btn-primary { background-color:var(--primary-color); color:white; }
        .btn-primary:hover { background-color:var(--secondary-color); }
        .btn-success { background-color:var(--success-color); color:white; }
        .btn-success:hover { background-color:#2cb1d4; }
        .btn-outline { background-color:transparent; color:var(--primary-color); border:2px solid var(--primary-color); }
        .btn-outline:hover { background-color:var(--primary-color); color:white; }

        /* User Table */
        .user-table-container { background-color:white; border-radius:var(--border-radius); padding:25px; box-shadow:var(--shadow); margin-bottom:40px; overflow-x:auto; }
        .table-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; flex-wrap:wrap; gap:15px; }
        .table-header h3 { font-size:1.3rem; }
        .table-filters { display:flex; gap:15px; align-items:center; }
        .filter-select { padding:8px 15px; border-radius:var(--border-radius); border:1px solid #ddd; background-color:white; outline:none; }
        table { width:100%; border-collapse:collapse; min-width:800px; }
        thead { background-color:#f8f9fa; }
        th, td { padding:15px; text-align:left; border-bottom:1px solid #eee; }
        th { font-weight:600; color:#555; }
        .user-avatar-small { width:35px; height:35px; border-radius:50%; background-color:var(--primary-color); display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:0.9rem; }
        .user-info-cell { display:flex; align-items:center; gap:15px; }
        .user-name { font-weight:600; margin-bottom:3px; }
        .user-email { color:#777; font-size:0.9rem; }
        .status-badge { padding:5px 10px; border-radius:20px; font-size:0.85rem; font-weight:500; display:inline-block; }
        .status-active { background-color:#e7f7ef; color:#1ea97c; }
        .status-inactive { background-color:#f5f5f5; color:#777; }
        .status-pending { background-color:#fff5e6; color:#ff9800; }
        .role-badge { padding:5px 10px; border-radius:20px; font-size:0.85rem; font-weight:500; display:inline-block; }
        .role-admin { background-color:#e6f3ff; color:#2196f3; }
        .role-user { background-color:#f0f0f0; color:#666; }
        .role-moderator { background-color:#f3e6ff; color:#9c27b0; }

        /* Modal */
        .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background-color: rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center; z-index:9999; opacity:0; visibility:hidden; transition:var(--transition); }
        .modal-overlay.active { opacity:1; visibility:visible; }
        .modal { background-color:white; border-radius:var(--border-radius); width:90%; max-width:600px; max-height:90vh; overflow-y:auto; transform:translateY(-20px); transition:var(--transition); }
        .modal-overlay.active .modal { transform:translateY(0); }
        .modal-header { padding:20px 25px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
        .modal-header h3 { font-size:1.4rem; }
        .modal-close { background:none; border:none; font-size:1.5rem; color:#777; cursor:pointer; width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:var(--transition); }
        .modal-close:hover { background-color:#f5f5f5; }
        .modal-body { padding:25px; }
        .form-group { margin-bottom:20px; }
        .form-group label { display:block; margin-bottom:8px; font-weight:600; color:#555; }
        .form-control { width:100%; padding:12px 15px; border-radius:var(--border-radius); border:1px solid #ddd; outline:none; transition:var(--transition); }
        .form-control:focus { border-color:var(--primary-color); }
        .form-row { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
        .modal-footer { padding:20px 25px; border-top:1px solid #eee; display:flex; justify-content:flex-end; gap:15px; }

        footer { text-align:center; padding:20px; color:#777; border-top:1px solid #eee; margin-top:30px; }

        /* Responsive omitted for brevity (same as your original) */
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
        </div>
        <ul class="sidebar-menu">
            <li><a href="staff-dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="stafflist-staff-dashboard.html"><i class="fas fa-users"></i> Staffs</a></li>
            <li><a href="booking-staff-dashboard.html" class="active"><i class="fas fa-shopping-cart"></i> Booking</a></li>
            <li><a href="settings-staff-dashboard.html"><i class="fas fa-user"></i> Profile
            <li><a href="login.html" onclick="window.location.href='login.html'; return false;"><i class="fas fa-sign-out-alt"></i>Back</a></li>
        </ul>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header>
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchUsers" placeholder="Search bookings...">
                </div>
            </div>
            <div class="header-right">
                <div class="notification"><i class="fas fa-bell"></i><span class="notification-count">3</span></div>
                <div class="user-profile"><div class="user-avatar">A</div><div class="user-info"><h4>John</h4><p>Staff</p></div><i class="fas fa-chevron-down"></i></div>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="page-title">
                <h1>Booking</h1>
                <div class="action-buttons">
                    <button class="btn btn-outline" id="refreshUsersBtn"><i class="fas fa-sync-alt"></i> Refresh</button>
                </div>
            </div>

            <div class="user-stats">
                <div class="user-stat-card">
                    <div class="user-stat-icon total"><i class="fas fa-users"></i></div>
                    <div class="user-stat-info"><h3 id="totalUsers">0</h3><p>Total Bookings</p></div>
                </div>
                <div class="user-stat-card">
                    <div class="user-stat-icon active"><i class="fas fa-user-check"></i></div>
                    <div class="user-stat-info"><h3 id="activeUsers">0</h3><p>Upcoming</p></div>
                </div>
                <div class="user-stat-card">
                    <div class="user-stat-icon inactive"><i class="fas fa-user-times"></i></div>
                    <div class="user-stat-info"><h3 id="inactiveUsers">0</h3><p>Cancelled</p></div>
                </div>
                <div class="user-stat-card">
                    <div class="user-stat-icon new"><i class="fas fa-user-plus"></i></div>
                    <div class="user-stat-info"><h3 id="newUsers">0</h3><p>Pending</p></div>
                </div>
            </div>

            <!-- Bookings Table -->
            <div class="user-table-container">
                <div class="table-header">
                    <h3>My Appointments</h3>
                    <div class="table-filters">
                        <select class="filter-select" id="filterBookingStatus">
                            <option value="">All Status</option>
                            <option value="confirmed">Confirmed</option>
                            <option value="pending">Pending</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Booking ID</th>
                            <th>Service</th>
                            <th>Date & Time</th>
                            <th>Customer</th>
                            <th>Status</th>
                            <th>Amount</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bookingsTable"></tbody>
                </table>
            </div>

            <footer>Staff Dashboard &copy; 2023. All rights reserved.</footer>
        </div>
    </main>

    <!-- Modal -->
    <div class="modal-overlay" id="userModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Booking Details</h3>
                <button class="modal-close" id="closeModal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <div class="form-group">
                        <label for="firstName">Service</label>
                        <input type="text" id="firstName" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Customer</label>
                        <input type="text" id="lastName" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="email">Date & Time</label>
                        <input type="text" id="email" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status" class="form-control">
                            <option value="confirmed">Confirmed</option>
                            <option value="pending">Pending</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="phone">Amount</label>
                        <input type="text" id="phone" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelBtn">Cancel</button>
                <button class="btn btn-success" id="saveUserBtn">Save</button>
            </div>
        </div>
    </div>

<script>
    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const menuToggle = document.getElementById('menuToggle');
    menuToggle.addEventListener('click',()=>sidebar.classList.toggle('active'));

    // Elements
    const bookingsTable = document.getElementById('bookingsTable');
    const filterBookingStatus = document.getElementById('filterBookingStatus');
    const searchUsers = document.getElementById('searchUsers');
    const refreshUsersBtn = document.getElementById('refreshUsersBtn');
    const userModal = document.getElementById('userModal');
    const modalTitle = document.getElementById('modalTitle');
    const closeModal = document.getElementById('closeModal');
    const cancelBtn = document.getElementById('cancelBtn');
    const saveUserBtn = document.getElementById('saveUserBtn');
    const userForm = document.getElementById('userForm');

    // Dummy bookings data
    let bookings = [
        {id:'B001', service:'Haircut', datetime:'2026-01-21 10:00', customer:'Ali', status:'confirmed', amount:'20'},
        {id:'B002', service:'Shave', datetime:'2026-01-21 12:00', customer:'Ahmad', status:'pending', amount:'10'},
        {id:'B003', service:'Hair Color', datetime:'2026-01-22 09:00', customer:'Siti', status:'cancelled', amount:'30'}
    ];

    let currentEditBookingId = null;

    // --- Functions for View/Edit/Delete ---
    function renderBookings() {
        bookingsTable.innerHTML = '';
        const statusFilter = filterBookingStatus.value;

        bookings
            .filter(b => statusFilter === '' || b.status === statusFilter)
            .forEach(b => {
                bookingsTable.innerHTML += `
                    <tr>
                        <td>${b.id}</td>
                        <td>${b.service}</td>
                        <td>${b.datetime}</td>
                        <td>${b.customer}</td>
                        <td><span class="status-badge status-${b.status}">${b.status}</span></td>
                        <td>${b.amount}</td>
                        <td>
                            <div class="action-buttons-cell">
                                <button class="btn-action view" title="View" onclick="openBookingModal('${b.id}', 'view')"><i class="fas fa-eye"></i></button>
                                <button class="btn-action edit" title="Edit" onclick="openBookingModal('${b.id}', 'edit')"><i class="fas fa-edit"></i></button>
                                <button class="btn-action delete" title="Delete" onclick="deleteBooking('${b.id}')"><i class="fas fa-trash"></i></button>
                            </div>
                        </td>
                    </tr>
                `;
            });
        updateUserStats();
    }

    function openBookingModal(id, mode){
        const booking = bookings.find(b=>b.id===id);
        if(!booking) return;
        modalTitle.innerText = mode==='view' ? `View Booking: ${id}` : `Edit Booking: ${id}`;
        document.getElementById('firstName').value = booking.service;
        document.getElementById('lastName').value = booking.customer;
        document.getElementById('email').value = booking.datetime;
        document.getElementById('status').value = booking.status;
        document.getElementById('phone').value = booking.amount;

        const isView = mode==='view';
        Array.from(userForm.elements).forEach(el=>el.disabled=isView);
        saveUserBtn.style.display = isView ? 'none' : 'inline-flex';
        currentEditBookingId = isView ? null : id;
        userModal.classList.add('active');
    }

    function closeModalFunc(){
        userModal.classList.remove('active');
        Array.from(userForm.elements).forEach(el=>el.disabled=false);
        saveUserBtn.style.display='inline-flex';
        currentEditBookingId = null;
    }

    closeModal.addEventListener('click', closeModalFunc);
    cancelBtn.addEventListener('click', closeModalFunc);

    saveUserBtn.addEventListener('click', ()=>{
        if(!currentEditBookingId) return;
        const booking = bookings.find(b=>b.id===currentEditBookingId);
        if(!booking) return;
        booking.service = document.getElementById('firstName').value;
        booking.customer = document.getElementById('lastName').value;
        booking.datetime = document.getElementById('email').value;
        booking.status = document.getElementById('status').value;
        booking.amount = document.getElementById('phone').value;
        closeModalFunc();
        renderBookings();
    });

    function deleteBooking(id){
        if(confirm('Are you sure you want to delete this booking?')){
            bookings = bookings.filter(b=>b.id!==id);
            renderBookings();
        }
    }

    searchUsers.addEventListener('input', function(){
        const keyword = this.value.toLowerCase();
        bookingsTable.innerHTML='';
        bookings
            .filter(b => b.id.toLowerCase().includes(keyword) || b.service.toLowerCase().includes(keyword) || b.customer.toLowerCase().includes(keyword))
            .forEach(b=>{
                bookingsTable.innerHTML += `
                    <tr>
                        <td>${b.id}</td>
                        <td>${b.service}</td>
                        <td>${b.datetime}</td>
                        <td>${b.customer}</td>
                        <td><span class="status-badge status-${b.status}">${b.status}</span></td>
                        <td>${b.amount}</td>
                        <td>
                            <div class="action-buttons-cell">
                                <button class="btn-action view" onclick="openBookingModal('${b.id}','view')"><i class="fas fa-eye"></i></button>
                                <button class="btn-action edit" onclick="openBookingModal('${b.id}','edit')"><i class="fas fa-edit"></i></button>
                                <button class="btn-action delete" onclick="deleteBooking('${b.id}')"><i class="fas fa-trash"></i></button>
                            </div>
                        </td>
                    </tr>
                `;
            });
    });

    filterBookingStatus.addEventListener('change', renderBookings);
    refreshUsersBtn.addEventListener('click', function() {
    // Clear search input
    searchUsers.value = '';

    // Reset status filter
    filterBookingStatus.value = '';

    // Render the table with all bookings
    renderBookings();
});


    function updateUserStats(){
        document.getElementById('totalUsers').innerText = bookings.length;
        document.getElementById('activeUsers').innerText = bookings.filter(b=>b.status==='confirmed').length;
        document.getElementById('inactiveUsers').innerText = bookings.filter(b=>b.status==='cancelled').length;
        document.getElementById('newUsers').innerText = bookings.filter(b=>b.status==='pending').length;
    }

    document.addEventListener('DOMContentLoaded', renderBookings);
</script>
</body>
</html>
